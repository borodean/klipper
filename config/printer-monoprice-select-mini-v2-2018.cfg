[controller_fan chassis_fan]
pin: PB3
off_below: 0.25

[mcu]
serial: /dev/ttyACM0
restart_method: command

# [mcu host]
# serial: /tmp/klipper_host_mcu

[printer]
kinematics: cartesian
max_velocity: 150
max_accel: 800
max_z_velocity: 1.5
max_z_accel: 20

[stepper_x]
step_pin: PB14
dir_pin: !PB15 # modify stepper direction if necessary
enable_pin: !PA8
rotation_distance: 34.51 # 17 teeth on pulley; MXL belt (2.03 pitch)
microsteps: 16
endstop_pin: ^!PB4
position_min: -1
position_endstop: 0
position_max: 120
homing_speed: 15

[stepper_y]
step_pin: PB12
dir_pin: PB13 # modify stepper direction if necessary
enable_pin: !PA8
rotation_distance: 34.51 # check comment in [stepper_x] section
microsteps: 16
endstop_pin: ^!PA15
position_min: -1
position_endstop: 0
position_max: 120
homing_speed: 15

[stepper_z]
step_pin: PB10
dir_pin: PB2 # modify stepper direction if necessary
enable_pin: !PB11
rotation_distance: 0.7 # M4 rod.  check comment in [stepper_x] section
microsteps: 16
full_steps_per_rotation: 48
endstop_pin: ^!PB5
position_endstop: 0.5
position_max: 120
homing_speed: 10

[extruder]
step_pin: PB0
dir_pin: !PC13 # modify stepper direction if necessary
enable_pin: !PB1
microsteps: 16
rotation_distance: 32.99 # 97 steps/mm. check comment in [stepper_x] section
nozzle_diameter: 0.4
filament_diameter: 1.75
max_extrude_only_distance: 425 # for (un-)loading
heater_pin: PB6
sensor_type: EPCOS 100K B57560G104F
sensor_pin: PA0
control: pid
pid_Kp: 21
pid_Ki: 0.75
pid_Kd: 125
min_temp: 0
max_temp: 260

[heater_bed]
heater_pin: PB7
sensor_type: EPCOS 100K B57560G104F
sensor_pin: PA1
control: pid
min_temp: 0
max_temp: 100
pid_Kp: 70
pid_Ki: 1.5
pid_Kd: 812

[bed_screws]
# optional: i2c ssd1306 OLED-display controlled by raspi host_mcu
screw1: 22, 10
screw2: 22, 90
screw3: 98, 90
screw4: 98, 10

# [bltouch]
# sensor_pin: PA3
# control_pin: PA2
# z_offset: 1

[heater_fan fan]
pin: PB8

# [display]
# optional: Touch sensor via unpopulated header
# sdcard-slot) is: GND-PA2-PA3-3.3V
# lcd_type: ssd1306
# encoder_pins: ^host:gpiochip0/gpio7, ^host:gpiochip0/gpio8
# click_pin: !host:gpiochip0/gpio4
# i2c_mcu: host
# i2c_bus: i2c.1
