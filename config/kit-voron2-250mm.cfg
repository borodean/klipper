[stepper_z2]
step_pin: z:PL3
dir_pin: !z:PL1
enable_pin: !z:PK0
microsteps: 16
rotation_distance: 8

[stepper_z3]
step_pin: z:PA4
dir_pin: z:PA6
enable_pin: !z:PA2
microsteps: 16
rotation_distance: 8

[mcu]
serial: /dev/serial/by-id/**INSERT_YOUR_ARDUINO_DEFINITION_HERE**
restart_method: arduino

[mcu z]
serial: /dev/serial/by-id/**INSERT_YOUR_ARDUINO_DEFINITION_HERE**
restart_method: arduino

[printer]
kinematics: corexy
max_velocity: 350
max_accel: 3000
max_z_velocity: 50
max_z_accel: 350

[stepper_x]
step_pin: PF0
dir_pin: !PF1
enable_pin: !PD7
rotation_distance: 40
microsteps: 16
endstop_pin: ^PE4
position_endstop: 250
position_max: 250
homing_speed: 100

[stepper_y]
step_pin: PF6
dir_pin: !PF7
enable_pin: !PF2
rotation_distance: 40
microsteps: 16
endstop_pin: ^PJ0
position_endstop: 250
position_max: 250
homing_speed: 100

[stepper_z]
step_pin: z:PF0
dir_pin: !z:PF1
enable_pin: !z:PD7
rotation_distance: 8
microsteps: 16
endstop_pin: ^!z:PD3
position_min: -2
position_endstop: -0.2
position_max: 250
homing_speed: 15
homing_retract_dist: 3
second_homing_speed: 3

[extruder]
step_pin: PA4
dir_pin: PA6
enable_pin: !PA2
microsteps: 16
rotation_distance: 5.76576
nozzle_diameter: 0.4
filament_diameter: 1.75
max_extrude_only_distance: 780
heater_pin: PB4
sensor_type: Generic 3950
sensor_pin: PK5
smooth_time: 3
control: pid
pid_Kp: 16.43
pid_Ki: 0.755
pid_Kd: 89.337
min_temp: 0
max_temp: 270

[heater_bed]
smooth_time: 3
max_power: 0.75
heater_pin: z:PB5
sensor_type: NTC 100K MGB18-104F39050L32
sensor_pin: z:PK7
control: pid
min_temp: 0
max_temp: 110
pid_Kp: 47.69
pid_Ki: 1.556
pid_Kd: 365.338

[quad_gantry_level]
gantry_corners:
   -55, -7
   305, 320
points:
   25, 0
   25, 200
   225, 200
   225, 0
speed: 200
horizontal_move_z: 6

[homing_override]
gcode:
   G90
   G0 Z5 F600
   G28 X Y
   G0 X179 Y249.5 F3600
   G28 Z
   G0 Z10 F1800
   G0 X125 Y125 Z20 F3600
axes: z
set_position_z: 0

[gcode_macro G32]
gcode:
    G28
    QUAD_GANTRY_LEVEL
    QUAD_GANTRY_LEVEL
    G0 X125 Y125 Z20 F6000

[gcode_macro PRINT_START]
gcode:
    M117 Homing...                 ; display message
    G28                            ; home all axes
    G1 Z20 F3000                   ; move nozzle away from bed
    M117 Preheat (Print)           ; display message
    M104 S0                        ; turn off hotend while waiting for bed to get to temp

[gcode_macro PRINT_END]
gcode:
    M400                           ; wait for buffer to clear
    G92 E0                         ; zero the extruder
    G1 E-4.0 F3600                 ; retract
    G91                            ; relative positioning
    G0 Z1.00 X20.0 Y20.0 F20000    ; move nozzle to remove stringing
    M104 S0                        ; turn off hotend
    M140 S0                        ; turn off bed
    M106 S0                        ; turn off fan
    G1 Z20 F3000                   ; move nozzle up 20mm
    G90                            ; absolute positioning
    G0  X125 Y245 F3600            ; park nozzle at rear
    M117 Finished!                 ; display message

[gcode_macro UNLOAD_FILAMENT]
gcode:
    M83
    G1 E10 F300
    G1 E-780 F1800
    M82

[gcode_macro LOAD_FILAMENT]
gcode:
    M83
    G1 E750 F1800
    G1 E30 F300
    G1 E15 F150
    M82

[probe]
pin: ^z:PD2
y_offset: 25
z_offset: 0
speed: 2
samples: 4
sample_retract_dist: 6

[stepper_z1]
step_pin: z:PF6
dir_pin: z:PF7
enable_pin: !z:PF2
microsteps: 16
rotation_distance: 8

[fan]
pin: PH6
kick_start_time: 0.5

[heater_fan hotend_fan]
pin: z:PH6
kick_start_time: 0.5

[heater_fan controller_fan]
pin: z:PB4
kick_start_time: 0.5
heater: heater_bed
heater_temp: 45

[heater_fan exhaust_fan]
pin: z:PH5
kick_start_time: 0.5
heater: heater_bed
heater_temp: 60

[display]
lcd_type: st7920
menu_timeout: 40
encoder_pins: ^z:PC4, ^z:PC6
click_pin: ^!z:PC2
kill_pin: ^!z:PG0
cs_pin: z:PH1
sclk_pin: z:PA1
sid_pin: z:PH0
