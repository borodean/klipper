[mcu]
serial: /dev/ttyACM0

[printer]
kinematics: cartesian
max_velocity: 300
max_accel: 2000
max_z_velocity: 7
max_z_accel: 500

[stepper_x]
step_pin: PC0
dir_pin: PL1
enable_pin: !PA7
rotation_distance: 32
microsteps: 16
endstop_pin: ^!PB6
position_min: -3
position_endstop: -3
position_max: 159
homing_speed: 50
homing_retract_dist: 2
second_homing_speed: 5

[stepper_y]
step_pin: PC1
dir_pin: !PL0
enable_pin: !PA6
rotation_distance: 32
microsteps: 16
endstop_pin: ^!PB5
position_min: -7
position_endstop: -7
position_max: 173
homing_speed: 50
homing_retract_dist: 2
second_homing_speed: 5

[stepper_z]
step_pin: PC2
dir_pin: PL2
enable_pin: !PA5
rotation_distance: 2
microsteps: 16
endstop_pin: ^!PA1
position_min: -2
position_endstop: 161.5
position_max: 161.5
homing_speed: 7
homing_retract_dist: 2
second_homing_speed: 2

[extruder]
step_pin: PC3
dir_pin: !PL6
enable_pin: !PA4
microsteps: 16
rotation_distance: 3.842
nozzle_diameter: 0.4
filament_diameter: 2.85
max_extrude_only_velocity: 500
max_extrude_only_accel: 2000
heater_pin: PE5
sensor_type: ATC Semitec 104GT-2
sensor_pin: PF0
control: pid
pid_Kp: 28.79
pid_Ki: 1.91
pid_Kd: 108.51
min_extrude_temp: 160
min_temp: 0
max_temp: 280

[heater_bed]
heater_pin: PG5
sensor_type: Honeywell 100K 135-104LAG-J01
sensor_pin: PF2
control: pid
min_temp: 0
max_temp: 130
pid_Kp: 294
pid_Ki: 65
pid_Kd: 382

[bed_tilt]
points:
  -2, -6
  156, -6
  156, 158
  -2, 158
speed: 75
horizontal_move_z: 2

[homing_override]
gcode:
  G91
  G28 Z
  G0 Z-5
  G28 X Y
  G0 X3 Y7
  G90

[gcode_macro G29]
gcode: BED_TILT_CALIBRATE

[firmware_retraction]
retract_length: 2
retract_speed: 200
unretract_speed: 200

[probe]
# z_offset equals washer thickness ~: 1.377
pin: ^!PB4
z_offset: 1.377
samples: 2
sample_retract_dist: 1
samples_tolerance: 0.2
samples_tolerance_retries: 2

[fan]
pin: PH5

[heater_fan heatbreak_cooling_fan]
pin: PH3

[output_pin stepper_xy_current]
pin: PL3
pwm: True
value: 1.3
cycle_time: 0.00003
hardware_pwm: True
scale: 2

[output_pin stepper_z_current]
pin: PL4
pwm: True
value: 1.63
cycle_time: 0.00003
hardware_pwm: True
scale: 2

[output_pin stepper_e_current]
pin: PL5
pwm: True
value: 1.25
cycle_time: 0.00003
hardware_pwm: True
scale: 2

[static_digital_output stepper_config]
pins:
    PG1, PG0,
    PK7, PG2,
    PK6, PK5,
    PK3, PK4

[static_digital_output yellow_led]
pins: !PB7
